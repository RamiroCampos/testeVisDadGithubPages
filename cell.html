<!DOCTYPE html>
<html>

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <title>Titulo da pagina</title>
  <link rel="stylesheet" type="text/css" href="./inspector.css">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin="" />

  <!-- Make sure you put this AFTER Leaflet's CSS -->
  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>

  <!-- Custom styles for this template -->
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/dc@4/dist/style/dc.css" />
  <script src="https://d3js.org/d3.v5.min.js"></script>
  <script src="https://unpkg.com/crossfilter2@1.5.2/crossfilter.min.js"></script>
  <script src="https://unpkg.com/dc@4.0.5/dist/dc.min.js"></script>

  <style>
    #mapid {
      width: 650px;
      height: 480px;
    }

    line.link {
      fill: none;
      stroke: #ddd;
      stroke-opacity: 0.8;
      stroke-width: 1.5px;
    }
  </style>
</head>

<main role="main" class="container">

  <select id="ddlViewBy" onchange="run()">
    <option value=T5_LEATHER selected="selected">T5_LEATHER
    <option value=T5_HIDE>T5_HIDE

    <option value=T6_LEATHER>T6_LEATHER
    <option value=T6_HIDE>T6_HIDE

    <option value=T7_LEATHER>T7_LEATHER
    <option value=T7_HIDE>T7_HIDE
  </select>

  <div class="row">
    <h3> Análise dos Preços</h3>
  </div>


  <div class='row'>
    <div id="mapid" class="col-6">
    </div>
    <div class="col-6">
      <div id='boxplot'>
        <h5>Variação dos Preços</h5>
      </div>

    </div>
  </div>

  <div class="row">
    <div id='time-chart'>
      <h5> Preços ao longo de 1 mês </h5>
    </div>
  </div>

  <div class="row">
    <div id='graf1'>
      <h5> Lucro por pack(999 unidades) - retorno de 36,7%(sem foco) </h5>
    </div>
  </div>
  <div class="row">
    <div id='graf2'>
      <h5> Gráfico 2 de Lucro </h5>
    </div>
  </div>

</main>
<script type="text/javascript">
  let lineChart = dc.seriesChart("#time-chart");
  let boxPlotMax = dc.boxPlot("#boxplot");


  let lucroChart1 = dc.barChart("#graf1");
  let lucroChart2 = dc.pieChart("#graf2");

  let bounds = [[0, 0], [800, 1200]]
  let mapInstance = L.map("mapid", {
    crs: L.CRS.Simple,
    minZoom: -5
  });
  L.imageOverlay('./WorldMap.png', bounds).addTo(mapInstance);

  mapInstance.fitBounds(bounds);

  mapInstance.setView([400, 600], -1);

  // circlesLayer = L.layerGroup().addTo(map);

  paint = new Object({
    Martlock: [418, 559],
    Thetford: [561, 220],
    "Fort Sterling": [886, 299],
    Lymhurst: [1090, 680],
    Bridgewatch: [687, 886]
  });
  function mapping([x, y]) {
    // recebe (x,y) do paint, e retorna (y,x) do mapa do leaflet
    return [Math.round((1080 - y) * (800 / 1080)), Math.round(x * (1200 / 1440))]
  };

  let choiceID = 1;
  function run() {
    var e = document.getElementById("ddlViewBy");
    choiceID = e.value;
  }


</script>

</html>